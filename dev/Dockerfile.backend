FROM python:3.12-slim

WORKDIR /app

COPY addon/hass_flatmate_service/pyproject.toml /tmp/pyproject.toml
RUN pip install --no-cache-dir \
    "fastapi>=0.115.0,<1.0.0" \
    "uvicorn>=0.30.0,<1.0.0" \
    "sqlalchemy>=2.0.30,<3.0.0" \
    "pydantic>=2.8.0,<3.0.0"

CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8099", "--reload", "--reload-dir", "/app/app"]
